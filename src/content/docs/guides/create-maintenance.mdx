---
title: Créer une maintenance
description: Guide pour planifier et gérer les maintenances dans XetaSuite.
---

import { Steps, Aside } from '@astrojs/starlight/components';

Les maintenances permettent de suivre les interventions planifiées ou réalisées sur les matériels.

## Types de maintenance

| Type | Description |
|------|-------------|
| `PREVENTIVE` | Maintenance planifiée régulière |
| `CORRECTIVE` | Réparation suite à une panne |
| `PREDICTIVE` | Basée sur l'analyse de données |

## Statuts de maintenance

| Statut | Description |
|--------|-------------|
| `SCHEDULED` | Planifiée, non démarrée |
| `IN_PROGRESS` | En cours d'exécution |
| `COMPLETED` | Terminée avec succès |
| `CANCELLED` | Annulée |

## Créer une maintenance

<Steps>

1. **Accéder au module Maintenances**

   Depuis le menu latéral, cliquez sur **Maintenances**.

2. **Cliquer sur "Nouvelle maintenance"**

3. **Sélectionner le matériel**

   Choisissez le matériel concerné dans la liste.

4. **Remplir les informations**

   | Champ | Obligatoire | Description |
   |-------|-------------|-------------|
   | Matériel | ✅ | Équipement à maintenir |
   | Type | ✅ | Préventive, Corrective, Prédictive |
   | Date planifiée | ✅ | Date prévue de l'intervention |
   | Description | ❌ | Détails de l'intervention |
   | Prestataire | ❌ | Company de type maintenancier |

5. **Enregistrer**

   La maintenance est créée avec le statut `SCHEDULED`.

</Steps>

## Cycle de vie

```
SCHEDULED → IN_PROGRESS → COMPLETED
                ↓
            CANCELLED
```

## API - Créer une maintenance

### Endpoint

```http
POST /api/v1/maintenances
```

### Payload

```json
{
    "material_id": 1,
    "type": "PREVENTIVE",
    "scheduled_at": "2024-02-15T09:00:00Z",
    "description": "Révision annuelle du compresseur",
    "company_id": 5
}
```

### Réponse

```json
{
    "data": {
        "id": 1,
        "material": {
            "id": 1,
            "name": "Compresseur A1"
        },
        "type": "PREVENTIVE",
        "status": "SCHEDULED",
        "scheduled_at": "2024-02-15T09:00:00Z",
        "started_at": null,
        "completed_at": null,
        "description": "Révision annuelle du compresseur",
        "company": {
            "id": 5,
            "name": "MaintenancePro"
        }
    }
}
```

## Mettre à jour le statut

### Démarrer une maintenance

```http
PATCH /api/v1/maintenances/{id}
```

```json
{
    "status": "IN_PROGRESS",
    "started_at": "2024-02-15T09:30:00Z"
}
```

### Terminer une maintenance

```json
{
    "status": "COMPLETED",
    "completed_at": "2024-02-15T12:00:00Z",
    "notes": "Remplacement du filtre effectué"
}
```

## Permissions requises

| Action | Permission |
|--------|------------|
| Voir la liste | `maintenance.viewAny` |
| Voir une maintenance | `maintenance.view` |
| Créer | `maintenance.create` |
| Modifier | `maintenance.update` |
| Supprimer | `maintenance.delete` |

<Aside type="tip">
  Les maintenances sont liées au site du matériel. Un utilisateur ne voit que les maintenances de son site actuel.
</Aside>

## Prochaines étapes

- [Gérer les incidents](/guides/manage-incidents/) - Signaler et suivre les incidents
- [Mouvements de pièces](/guides/item-movements/) - Gérer le stock
