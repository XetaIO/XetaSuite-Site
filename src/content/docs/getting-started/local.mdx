---
title: Lancer en local
description: Guide pour démarrer XetaSuite en environnement de développement local.
---

import { Steps, Tabs, TabItem, Aside } from '@astrojs/starlight/components';

## Prérequis

Assurez-vous d'avoir complété :
- [Installation Backend](/getting-started/backend/)
- [Installation Frontend](/getting-started/frontend/)
- [Configuration .env](/getting-started/configuration/)

## Démarrage rapide

### Avec Laravel Herd (Recommandé)

Si vous utilisez [Laravel Herd](https://herd.laravel.com/), le backend est automatiquement accessible sur `https://xetasuite-core.test`.

<Steps>

1. **Démarrer les services backend**

   ```bash
   cd XetaSuite-core
   composer run dev
   ```

   Cette commande lance :
   - Le serveur Laravel
   - Le worker de queue

2. **Démarrer le frontend**

   ```bash
   cd XetaSuite-React
   npm run dev
   ```

3. **Accéder à l'application**

   Ouvrez `http://localhost:5173` dans votre navigateur.

</Steps>

### Sans Herd

<Tabs>
  <TabItem label="Terminal 1 - Backend">
    ```bash
    cd XetaSuite-core
    php artisan serve
    ```
  </TabItem>
  <TabItem label="Terminal 2 - Queue">
    ```bash
    cd XetaSuite-core
    php artisan queue:work
    ```
  </TabItem>
  <TabItem label="Terminal 3 - Frontend">
    ```bash
    cd XetaSuite-React
    npm run dev
    ```
  </TabItem>
</Tabs>

## Compte de démonstration

Après avoir exécuté les seeders, vous pouvez vous connecter avec :

| Email | Mot de passe | Rôle |
|-------|--------------|------|
| `admin@xetasuite.test` | `password` | Admin HQ |
| `manager@xetasuite.test` | `password` | Manager Site 1 |
| `user@xetasuite.test` | `password` | Utilisateur Site 1 |

<Aside type="tip">
  En mode démo (`APP_DEMO=true`), les identifiants sont pré-remplis sur la page de connexion.
</Aside>

## Commandes utiles

### Backend

```bash
# Lancer les tests
php artisan test

# Lancer un test spécifique
php artisan test --filter=CompanyController

# Rafraîchir la base de données
php artisan migrate:fresh --seed

# Formater le code
vendor/bin/pint --dirty
```

### Frontend

```bash
# Serveur de développement
npm run dev

# Build de production
npm run build

# Lancer le linter
npm run lint
```

## Résolution de problèmes

### Erreurs CORS

Vérifiez que `SPA_URL` dans `.env` correspond à l'URL de votre frontend :

```bash
SPA_URL=http://localhost:5173
```

### 419 CSRF token mismatch

Assurez-vous d'appeler `/sanctum/csrf-cookie` avant la connexion :

```typescript
await axios.get('/sanctum/csrf-cookie');
await axios.post('/api/v1/auth/login', credentials);
```

### Session non persistante

Vérifiez ces paramètres :

```txt
SANCTUM_STATEFUL_DOMAINS=localhost:5173,xetasuite.test
SESSION_DOMAIN=localhost
```

<Aside type="note">
  Pour le développement local avec différents ports, incluez tous les domaines dans `SANCTUM_STATEFUL_DOMAINS`.
</Aside>
