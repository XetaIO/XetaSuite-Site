---
title: Gestion des rôles
description: Guide pour créer et gérer les rôles dans XetaSuite.
---

import { Aside } from '@astrojs/starlight/components';

Les rôles sont **scopés par site** grâce à Spatie Laravel-Permission avec le mode teams.

## Rôles par défaut

| Rôle | Description |
|------|-------------|
| `admin` | Accès complet au site |
| `manager` | Gestion des opérations |
| `user` | Accès lecture seule |

## Créer un rôle

### Via l'interface

1. Accédez à **Administration** → **Rôles**
2. Cliquez sur **Nouveau rôle**
3. Nommez le rôle et sélectionnez les permissions
4. Enregistrez

### Via l'API

```http
POST /api/v1/roles
```

```json
{
    "name": "supervisor",
    "level": 50,
    "site_id": 1,
    "permissions": [
        "material.viewAny",
        "material.view",
        "maintenance.viewAny",
        "maintenance.view",
        "maintenance.update",
        "incident.viewAny",
        "incident.view",
        "incident.update"
    ]
}
```

<Aside type="caution">
  Le site assigné au rôle ne peut pas être modifié après création.
</Aside>

## Modifier un rôle

```http
PATCH /api/v1/roles/{id}
```

```json
{
    "name": "supervisor",
    "permissions": [
        "material.viewAny",
        "material.view",
        "material.update",
        "maintenance.*"
    ]
}
```

## Permissions par module

Voir toutes les permissions sur la [page des permissions](/admin/permissions/).

## Supprimer un rôle

```http
DELETE /api/v1/roles/{id}
```

<Aside type="caution">
  Un rôle avec des utilisateurs assignés ne peut pas être supprimé. Réassignez d'abord les utilisateurs.
</Aside>
